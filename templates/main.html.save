<!DOCTYPE html>
<html>
    <head>
      <style>
        aside {
          width: 30%;
          padding-left: 15px;
          margin-left: 15px;
          float: right;
          font-style: italic;
          background-color: lightgray;
        }
      </style>
      <title>Find Your Professor</title>

    	<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

    	<!-- BOOTSTRAP -->

    	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    		crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    		crossorigin="anonymous"></script>
    	<!-- JQUERY -->
    	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    	<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    		crossorigin="anonymous"></script>
    	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    	<!-- GOOGLE FONTS -->

    	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&display=swap" rel="stylesheet">


    	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>


    	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.css">
    	<script src="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.min.js"></script>

    	<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    </head>
      <!-- Global site tag (gtag.js) - Google Analytics -->

      <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125060974-1"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125060974-1');
      </script>


        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
              integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
              crossorigin="anonymous">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title> Find your professor </title>

        <style>

        .venue {
            border-bottom: 1px solid #DEE2E6;
            padding: 10px;
        }

        .venue:nth-last-child(1) {
            border-bottom: 0;
        }

        .venue:only-child {
            border: 0;
        }

        </style> -->
    <!-- <div class="container-fluid-nav text-center">
              <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <img src="{{ url_for('static', filename='iiitb_logo.png') }}" alt="IIIT-B">
                </button>
                <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                  <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item active">
                      <a class="nav-link" href="#"><span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <h1  class="text-center" style="color:#015483; margin-left:780px;">Faculty TimeTable</h1>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link disabled" href="#"></a>
                    </li>
                  </ul>
                  <div class="form-inline my-2 my-lg-0">
                   <span><a class="nav-link" href="/"><h3>Home</h3></a></span>
                  </div>
                </div>
              </nav>
        </div> -->
    <body>
        <div class="App">
          <div class="main-content">
          <nav>
            <div class="logo">
              <img src="{{ url_for('static', filename='iiitb_logo.png') }}" alt="IIIT-B">
            </div>
            <div class="logo">
            <a href="/"><h2>Home</h2></a>
            </div>
            <div class="logo">
            <a href="/professor"><h2>Faculty</h2> </a>
            </div>
          </nav>
          <aside class="sidebar">
            <div class="container" style="margin-top:5px">
        			<div class="row">
                <div class="col-md-12">
                    <br>
                    <p>
                    Select a name to see the weekly timetable of the
                    professor!
                    </p>
                    {% if name %}
                        <input name="prof"  autocomplete="off"
                                            placeholder="Who are you looking for?"
                                            class="form-control" id="prof_query" value="{{name}}">
                    {% else %}
                        <input name="prof"  autocomplete="off"
                                            placeholder="Who are you looking for?"
                                            class="form-control" id="prof_query">
                    {% endif %}
                    <div id="suggestions">
                        <ul class="list-group">
                        </ul>
                    </div>
                </div>
        			</div>
            </div>
<<<<<<< a41a2ddd7d70c6c11a1e9278d7747fab0a05996b
            <div class="row">
                {% if not error %}
                    {% if name %}
                    <h3 class="display-4" style="margin-top: 2%;"> <a href="{{ website }}" target="_blank"> {{ name }} </a> | {{ dept }} </h3>
                    <table class="table table-striped table-bordered table-hover
                    text-center">
                        <t
head class="thead-light">
                            <tr>
                                {% for time in times %}
                                <th class="col-md-1"> {{time}} </th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in data %}
                            <tr>
                                {% for col in row %}
                                {% set outer_loop = loop %}
                                <td class="col-md-1" style="padding: 0;">
                                    {% for venue in col %}
                                    <div class="venue">
                                        {{ venue }}
                                        {% if outer_loop.index > 1 %}
                                            {{ course }}
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </td>
                                {% endfor %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <form action = "/ics_helper">
                        <button class='btn btn-default'>Download as ics</button>
                    </form>
                    {% endif %}
                {% endif %}

                {% if error %}
                <div style="margin-top: 4%; margin-bottom: 4%" class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="error-template text-center">
                                <h1>Oops!</h1>
                                <h2>Professor Not Found!</h2>
                                <div class="error-details">
                                        Sorry, we're unable to find the professor that you searched
                                        for! Check the spelling of the professor's name. If you are
                                        still unable to find their timetable, then ERP doesn't
                                        contain their data.
                                </div>
                                <script>
                                    document.getElementById("prof_query").focus();
                                </script>
                            </div>
                        </div>
                        <div class="col-md-3">
                        </div>
                    </div>
                </div>
=======
      		</aside>
            <script type=text/javascript>
                $(function() {
                    $('a#ics').bind('click', function() {
                        $.getJSON('/ics_helper', function(data){
                            // do nothing
                        });
                        return false;
                    });
                });
            </script>




            <!-- <div class="timetable">
              <table class="table " id="timet">
                <thead>
                  <tr>
                    <th scope="col"></th>
                    <th scope="col">9:15 <br /> 10:45</th>
                    <th scope="col">11:00 <br /> 12:30</th>
                    <th scope="col">1:45 <br /> 3:15</th>
                    <th scope="col">3:30 <br /> 5:00</th>
                    <th scope="col">5:30 <br /> 7:00</th> -->
                    <!-- <th scope="col">14:00 <br /> 14:55</th>
                    <th scope="col">15:00 <br /> 15:55</th>
                    <th scope="col">16:00 <br /> 16:55</th>
                    <th scope="col">17:00 <br /> 17:55</th> -->
                  <!-- </tr> -->
<!-- ////////////////////////////////////// -->
>>>>>>> main.html changed


           <div class="timetable">
              {% if not error %}
                  {% if name %}
                  <h3 class="display-4" style="margin-top: 2%;"> <a href="{{ website }}" target="_blank"> {{ name }} </a> | {{ dept }} </h3>
                  <table class="table" id="timet">
                      <thead>
                          <tr>
                              {% for time in times %}
                              <th scope="col"> {{time}} </th>
                              {% endfor %}
                          </tr>
                      </thead>
                      <tbody>
                          {% for row in data %}
                          <tr>
                              {% for col in row %}
                              {% set outer_loop = loop %}
                              <td class="col-md-1" style="padding: 0;">
                                  {% for venue in col %}
                                  <div class="venue">
                                      {{ venue }}
                                      {% if outer_loop.index > 1 %}
                                          {{ course }}
                                      {% endif %}
                                  </div>
                                  {% endfor %}
                              </td>
                              {% endfor %}
                          </tr>
                          {% endfor %}
                      </tbody>
                  </table>

              <a href = # id=ics><button class='btn btn-default'>Download as ics</button></a>
                  {% endif %}
              {% endif %}

              {% if error %}
              <div style="margin-top: 4%; margin-bottom: 4%" class="container-fluid">
                  <div class="row">
                      <div class="col-md-12">
                          <div class="error-template text-center">
                              <h1>Oops!</h1>
                              <h2>Professor Not Found!</h2>
                              <div class="error-details">
                                      Sorry, we're unable to find the professor that you searched
                                      for! Check the spelling of the professor's name. If you are
                                      still unable to find their timetable, then ERP doesn't
                                      contain their data.
                              </div>
                              <script>
                                  document.getElementById("prof_query").focus();
                              </script>
                          </div>
                      </div>
                      <div class="col-md-3">
                      </div>
                  </div>
              </div>
            </div>
              {% endif %}

              <script>
                  var fullLink = window.location.href;
                  console.log(fullLink)
                  var splitLink = fullLink.split('=');
                  if (splitLink.length>1) {
                       searchQuery = splitLink[1].replace(/%20/g, " ");
                       var inputBox = document.getElementById("prof_query");
                       inputBox.value=searchQuery;
                       inputBox.focus();
                   }
              </script>
          </div>
          </div>

          <!-- ////////////////////////////// -->
      <!-- <footer>
				<div class="row">
					<i class="info">Click on a slot to mark it as occupied</i>
				</br></br>
					<button class="button2" onclick="clearTT()"><span>Clear</span></button>
					<button  class="button2" onclick="addToCalendar()"><span>Download ICS</span></button>
				</div>
				<div id="details-div"></div>
			</footer> -->


    </div>



        <script src="{{url_for('static', filename='scripts/autocomplete.js')}}"></script>
        <script>
            var datalist = [{% for prof in profs %} '{{prof}}', {% endfor %}];
            var worker = new Worker("{{url_for('static', filename='scripts/worker.js')}}");
            autocomplete(datalist, worker);
        </script>
    </body>
</html>
